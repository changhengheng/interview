import{_ as s,o as a,c as n,O as l}from"./chunks/framework.3d6e08ae.js";const C=JSON.parse('{"title":"谈谈ajax","description":"","frontmatter":{},"headers":[],"relativePath":"Interview/JingJiang/fuwuduan/谈谈ajax.md","filePath":"Interview/JingJiang/fuwuduan/谈谈ajax.md"}'),p={name:"Interview/JingJiang/fuwuduan/谈谈ajax.md"},o=l(`<h1 id="谈谈ajax" tabindex="-1">谈谈ajax <a class="header-anchor" href="#谈谈ajax" aria-label="Permalink to &quot;谈谈ajax&quot;">​</a></h1><ul><li>new 调用 XMLHttpRequest() 创建xhr对象</li><li>调用open初始化一个请求，参数是请求方式和请求地址</li><li>调用send发送一个请求</li><li>绑定onreadystatechange事件，处理服务端返回的结果</li></ul><div class="language-js"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">// 1. 创建 xhr 对象</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> xhr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">new</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">XMLHttpRequest</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 2. 设置请求方法和请求地址</span></span>
<span class="line"><span style="color:#A6ACCD;">	xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">open</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">GET</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">http://xxx/xxx</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 3. 发送请求</span></span>
<span class="line"><span style="color:#A6ACCD;">	xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">send</span><span style="color:#A6ACCD;">()</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">	</span><span style="color:#676E95;font-style:italic;">// 4. 绑定事件，处理服务端返回的结果</span></span>
<span class="line"><span style="color:#A6ACCD;">	xhr</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">onreadystatechange</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">function</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#F07178;">	    </span><span style="color:#676E95;font-style:italic;">/*</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	     判断readyState，等于4请求才完成了（但是不知道成功/失败）</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">		 0 － （未初始化）还没有调用send()方法</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	     1 － （载入）已调用send()方法，正在发送请求</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	     2 － （载入完成）send()方法执行完成，已经接收到全部响应内容</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	     3 － （交互）正在解析响应内容</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	     4 － （完成）响应内容解析完成，可以在客户端调用了</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">	  */</span></span>
<span class="line"><span style="color:#F07178;">	    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">readyState</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">===</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">4</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	        </span><span style="color:#676E95;font-style:italic;">// 判断响应状态码是否2xx</span></span>
<span class="line"><span style="color:#F07178;">	        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#F07178;"> (</span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&gt;=</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">200</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">status</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;"> </span><span style="color:#F78C6C;">300</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	            </span><span style="color:#676E95;font-style:italic;">// 成功</span></span>
<span class="line"><span style="color:#F07178;">	            </span><span style="color:#A6ACCD;">console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#F07178;">(</span><span style="color:#A6ACCD;">xhr</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">response</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">	        </span><span style="color:#89DDFF;">}</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">	            </span><span style="color:#676E95;font-style:italic;">// 失败</span></span>
<span class="line"><span style="color:#F07178;">	        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#F07178;">	</span><span style="color:#89DDFF;">}</span></span></code></pre></div>`,3),t=[o];function e(c,r,y,F,D,i){return a(),n("div",null,t)}const d=s(p,[["render",e]]);export{C as __pageData,d as default};
