# 为什么不推荐 v-for 与 v-if 一起使用

一起使用是指 **在同一个标签上使用**。

Vue3 中 v-if 优先级高于 v-for 优先级，不存在什么问题；Vue2 中，v-for 优先级高于 v-if 优先级，因此会先遍历完再判断是否渲染元素，这样会造成不必要的消耗——不需要渲染的根本不需要遍历；

两种解决方法：

看 v-if **用来判断的数据**与 v-for **遍历的数据** 是否有关联

有关联：即判断使用 v-for 遍历的数据
* 问题: 如果使用 v-if，每个数组元素都会解析指令来判断，效率低
* 解决：使用 computed 计算属性过滤产生一个子数组，不使用 v-if，效率比较高

没关联：即判断使用外部的数据
* 问题: 如果在当前标签上用 v-if，执行 n 次，效率低
* 解决: 添加一个父标签使用 v-if，内层使用 v-for 遍历，执行 1 次，效率高
